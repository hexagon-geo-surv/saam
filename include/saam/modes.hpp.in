// SPDX-FileCopyrightText: Leica Geosystems AG
//
// SPDX-License-Identifier: MIT

#pragma once

#include <version>

#define UNCHECKED 0
#define COUNTED 1
#define TRACKED 2

// If the mode is not defined from the compiler command line,
// then fall back to the mode coming from Conan option
#ifndef REFCELL_BORROW_CHECKING_MODE
#define REFCELL_BORROW_CHECKING_MODE @SAAM_BORROW_CHECKING_MODE_CMAKE@
#endif

#if REFCELL_BORROW_CHECKING_MODE == TRACKED
    #if !defined(__cpp_lib_stacktrace) || __cpp_lib_stacktrace < 202011L
        #error "<stacktrace> support is needed for tracked mode"
    #endif
#endif
