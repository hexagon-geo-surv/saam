// SPDX-FileCopyrightText: Leica Geosystems AG
//
// SPDX-License-Identifier: MIT

#pragma once

// If the mode is not defined from the compiler command line,
// then fall back to the mode coming from Conan option
#ifndef SAAM_BORROW_CHECKING_MODE
#define SAAM_BORROW_CHECKING_MODE @SAAM_BORROW_CHECKING_MODE_CMAKE@
#endif

#if SAAM_BORROW_CHECKING_MODE == 0

#include <saam/detail/counted_borrow_manager.hpp>
namespace saam
{
using default_borrow_manager_t = counted_borrow_manager;
}  // namespace saam

#elif SAAM_BORROW_CHECKING_MODE == 1

#include <version>

#if !defined(__cpp_lib_stacktrace) || __cpp_lib_stacktrace < 202011L
#error "<stacktrace> support is needed for tracked mode"
#endif

#include <saam/detail/tracked_borrow_manager.hpp>
namespace saam
{
using default_borrow_manager_t = tracked_borrow_manager;
}

#elif SAAM_BORROW_CHECKING_MODE == 2

#include <saam/detail/unchecked_borrow_manager.hpp>
namespace saam
{
using default_borrow_manager_t = unchecked_borrow_manager;
}  // namespace saam

#endif
